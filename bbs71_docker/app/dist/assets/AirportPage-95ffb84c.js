import{_ as C,j as $,r as _,o as r,c as i,b as t,n as k,h as w,t as d,w as A,v as L,a as c,F as b,g as y,k as P,f as h,p as F,e as T,L as W,D as B,l as M}from"./index-20062e62.js";import{N as O,F as R}from"./Footer-790742ea.js";import{S as V,F as q}from"./FlightRouteTable-ea32b02e.js";const z={components:{FlightCard:$},props:{tableName:{type:String,required:!0},flights:{type:Array,required:!0},flightType:{type:String,required:!0,validator:l=>["arrivals","departures"].includes(l)}},data(){return{filterField:"",selectedFlight:null,page:1,perPage:10,pages:[],totalFlights:0}},computed:{filteredFlights(){const l=this.flights.filter(o=>{const a=this.filterField.toLowerCase(),u=o.airline.name.toLowerCase(),e=o.route.from.origin.toLowerCase(),n=o.route.to.dest.toLowerCase(),p=o.flightInfo.flightNumber.toLowerCase();if(this.flightType==="arrivals")return o.departure.airport.originCityName.toLowerCase().startsWith(a)||u.startsWith(a)||p.startsWith(a)||e.startsWith(a);const s=o.arrival.airport.destCityName.toLowerCase();return n.startsWith(a)||u.startsWith(a)||s.startsWith(a)||p.startsWith(a)});return this.totalFlights=l.length,this.paginate(l)},setFlights(){console.log(this.totalFlights);let l=Math.ceil(this.totalFlights/this.perPage);this.pages=[];for(let o=1;o<=l;o++)this.pages.push(o);return this.pages}},methods:{handleRowClick(l){console.log("Se hizo clic en la fila:",l),this.selectedFlight=l},closeCard(){this.selectedFlight=null},paginate(l){let o=this.page,a=this.perPage,u=o*a-a,e=o*a;return l.slice(u,e)}}},f=l=>(F("data-v-0f305e2b"),l=l(),T(),l),U={class:"container"},j={class:"form-group"},E={class:"table-name"},G={class:"table"},H={class:"table-dark"},J=f(()=>t("th",{scope:"col"},"Date",-1)),K=f(()=>t("th",{scope:"col"},"Scheduled time",-1)),Q={key:0,scope:"col"},X=f(()=>t("th",{scope:"col"},"Airline",-1)),Y={key:1,scope:"col"},Z=f(()=>t("th",{scope:"col"},"Flight",-1)),tt=f(()=>t("th",{scope:"col"},"Status",-1)),et={class:"overflow-auto"},st=["onClick"],ot={class:"table-light"},lt={class:"table-light"},rt={key:0,class:"table-light"},it={class:"table-light"},at={key:1,class:"table-light"},nt={class:"table-light"},ct={key:0},dt=f(()=>t("tr",null,[t("td",{colspan:"6"},[t("div",{class:"alert alert-warning text-center",role:"alert"}," No flights found. ")])],-1)),ht=[dt],ut={class:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},_t={class:"btn-group mr-2 mx-auto",role:"group","aria-label":"Button group with nested dropdown"},pt=f(()=>t("i",{class:"fa-solid fa-angles-left"},null,-1)),gt=[pt],ft=["onClick"],bt=f(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),vt=[bt],mt={key:0,class:"row"};function yt(l,o,a,u,e,n){const p=_("flight-card");return r(),i(b,null,[t("div",U,[t("div",j,[t("label",E,[t("i",{class:k(a.tableName==="Arrivals"?"fas fa-plane-arrival":"fas fa-plane-departure")},null,2),w(" "+d(a.tableName),1)]),A(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>e.filterField=s),placeholder:"Write the flight, airline or city..."},null,512),[[L,e.filterField]])]),t("table",G,[t("thead",H,[t("tr",null,[J,K,a.flightType==="arrivals"?(r(),i("th",Q,"Origin")):c("",!0),X,a.flightType!=="arrivals"?(r(),i("th",Y,"Destination")):c("",!0),Z,tt])]),t("tbody",et,[(r(!0),i(b,null,y(n.filteredFlights,(s,g)=>(r(),i("tr",{key:s.id,onClick:m=>n.handleRowClick(s)},[t("td",ot,d(s.flightInfo.flightDate),1),t("td",lt,d(a.flightType==="arrivals"?s.arrival.crsArrTime:s.departure.crsDepTime),1),a.flightType==="arrivals"?(r(),i("td",rt,d(a.flightType==="arrivals"?s.route.from.origin:s.route.to.dest),1)):c("",!0),t("td",it,d(s.airline.name),1),a.flightType!=="arrivals"?(r(),i("td",at,d(a.flightType!=="arrivals"?s.route.to.dest:s.route.from.origin),1)):c("",!0),t("td",nt,d(s.flightInfo.flightNumber),1),t("td",{class:"table-light",style:P({color:s.flightInfo.isCancelled||s.flightInfo.isDiverted?"red":"green"})},[t("b",null,d(s.flightInfo.isDiverted?"Diverted":s.flightInfo.isCancelled?"Cancelled":"Arrived"),1)],4)],8,st))),128))]),n.filteredFlights.length===0?(r(),i("tbody",ct,ht)):c("",!0)]),t("div",ut,[t("div",_t,[e.page!=1?(r(),i("button",{key:0,onClick:o[1]||(o[1]=s=>e.page--),type:"button",class:"btn btn-warning"},gt)):c("",!0),(r(!0),i(b,null,y(n.setFlights.slice(e.page-1,e.page+2),(s,g)=>(r(),i("button",{key:g,onClick:m=>e.page=s,type:"button",class:k({"btn btn-warning":e.page!=s,"btn btn-dark":e.page==s})},d(s),11,ft))),128)),e.page<e.pages.length?(r(),i("button",{key:1,onClick:o[2]||(o[2]=s=>e.page++),type:"button",class:"btn btn-warning"},vt)):c("",!0)])])]),e.selectedFlight?(r(),i("div",mt,[h(p,{flight:e.selectedFlight,onClose:n.closeCard},null,8,["flight","onClose"])])):c("",!0)],64)}const kt=C(z,[["render",yt],["__scopeId","data-v-0f305e2b"]]);const Ct={props:{airlines:{type:Array,required:!0}},components:{Loading:W},data(){return{page:1,perPage:8,pages:[]}},computed:{displayedAirlines(){return this.paginate(this.airlines)},setAirlines(){let l=Math.ceil(this.airlines.length/this.perPage);this.pages=[];for(let o=1;o<=l;o++)this.pages.push(o);return this.pages},isLoading(){return this.$store.state.airport.airlines.length===0}},methods:{paginate(l){let o=this.page,a=this.perPage,u=o*a-a,e=o*a;return l.slice(u,e)}}},v=l=>(F("data-v-59875933"),l=l(),T(),l),wt={class:"container"},Ft=v(()=>t("div",{class:"form-group"},[t("label",{class:"table-name"},[t("h1",null,[t("i",{class:"fa-solid fa-ticket-airline"}),w(" Airlines")])])],-1)),Tt={class:"table"},At=v(()=>t("thead",{class:"table-dark"},[t("tr",null,[t("th",{scope:"col"},"Airline"),t("th",{scope:"col"},"Number of Flights")])],-1)),xt={class:"overflow-auto"},St={class:"table-light"},Dt={class:"table-light"},It={key:0},Nt=v(()=>t("tr",null,[t("td",{colspan:"2"},[t("div",{class:"alert alert-warning text-center",role:"alert"}," No airlines found. ")])],-1)),$t=[Nt],Lt={class:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},Pt={class:"btn-group mr-2 mx-auto",role:"group","aria-label":"Button group with nested dropdown"},Wt=v(()=>t("i",{class:"fa-solid fa-angles-left"},null,-1)),Bt=[Wt],Mt=["onClick"],Ot=v(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),Rt=[Ot];function Vt(l,o,a,u,e,n){const p=_("loading");return r(),i(b,null,[h(p,{active:n.isLoading,"onUpdate:active":o[0]||(o[0]=s=>n.isLoading=s),"can-cancel":!0},null,8,["active"]),t("div",wt,[Ft,t("table",Tt,[At,t("tbody",xt,[(r(!0),i(b,null,y(n.displayedAirlines,(s,g)=>(r(),i("tr",{key:s.iata},[t("td",St,[t("b",null,"("+d(s.iata)+")",1),w(" "+d(s.name),1)]),t("td",Dt,d(s.count),1)]))),128))]),n.displayedAirlines.length===0?(r(),i("tbody",It,$t)):c("",!0)]),t("div",Lt,[t("div",Pt,[e.page!=1?(r(),i("button",{key:0,onClick:o[1]||(o[1]=s=>e.page--),type:"button",class:"btn btn-warning"},Bt)):c("",!0),(r(!0),i(b,null,y(n.setAirlines.slice(e.page-1,e.page+2),(s,g)=>(r(),i("button",{onClick:m=>e.page=s,class:k({"btn btn-warning":e.page!=s,"btn btn-dark":e.page==s}),type:"button"},d(s),11,Mt))),256)),e.page<e.pages.length?(r(),i("button",{key:1,onClick:o[2]||(o[2]=s=>e.page++),type:"button",class:"btn btn-warning"},Rt)):c("",!0)])])])],64)}const qt=C(Ct,[["render",Vt],["__scopeId","data-v-59875933"]]);const zt={components:{FlightTable:kt,Navbar:O,Footer:R,SlideBar:V,DashboardCard:B,AirlineTable:qt,FlightRouteTable:q},data(){return{showArrivals:!1,selected:0,menuOptions:[{title:"Arrivals/Departures",iconClass:"fa-regular fa-paper-plane fa-xl"},{title:"Airlines",iconClass:"fa-solid fa-cart-flatbed-suitcase fa-xl"},{title:"Flight routes",iconClass:"fa-solid fa-plane-up fa-xl"},{title:"Dashboard",iconClass:"fa-solid fa-chart-line fa-xl"}]}},computed:{airport(){return this.$store.state.user.user.name},flights_departure(){return this.$store.state.airport.flights_departure},flights_arrival(){return this.$store.state.airport.flights_arrival},cards(){return this.$store.state.airport.cards},airlines(){return this.$store.state.airport.airlines},routes(){return this.$store.state.airport.routes}},methods:{onMenuOptionSelected(l){this.selected=l}},beforeMount(){this.$store.dispatch("airport/getFlightsDep",this.$store.state.user.user),this.$store.dispatch("airport/getFlightsArr",this.$store.state.user.user),this.$store.dispatch("airport/getCards",this.$store.state.user.user),this.$store.dispatch("airport/getAirlines",this.$store.state.user.user),this.$store.dispatch("airport/getRoutes",this.$store.state.user.user)}},x=l=>(F("data-v-609042d3"),l=l(),T(),l),Ut={class:"container"},jt={class:"airport_name"},Et={class:"row"},Gt={class:"col-md-3"},Ht={class:"col-md-9"},Jt={key:0},Kt={class:"form-check form-switch"},Qt=x(()=>t("label",{class:"form-check-label",for:"showArrivals"},[t("b",null,"Arrivals/Departures")],-1)),Xt={key:0,class:"table"},Yt={key:1,class:"table"},Zt={key:1},te={key:2},ee={key:3},se={key:4},oe=x(()=>t("h1",null,"Time on the runway",-1)),le=[oe];function re(l,o,a,u,e,n){const p=_("Navbar"),s=_("SlideBar"),g=_("FlightTable"),m=_("AirlineTable"),S=_("FlightRouteTable"),D=_("DashboardCard"),I=_("Footer");return r(),i(b,null,[h(p),t("div",Ut,[t("h1",jt,"Airport: "+d(n.airport),1),t("div",Et,[t("div",Gt,[h(s,{"menu-options":e.menuOptions,selected:e.selected,onSelected:n.onMenuOptionSelected},null,8,["menu-options","selected","onSelected"])]),t("div",Ht,[e.selected==0?(r(),i("div",Jt,[t("div",Kt,[Qt,A(t("input",{class:"form-check-input",type:"checkbox",id:"showArrivals","onUpdate:modelValue":o[0]||(o[0]=N=>e.showArrivals=N)},null,512),[[M,e.showArrivals]])]),e.showArrivals?(r(),i("div",Xt,[h(g,{tableName:"Departures",flights:n.flights_departure,flightType:"departures"},null,8,["flights"])])):(r(),i("div",Yt,[h(g,{tableName:"Arrivals",flights:n.flights_arrival,flightType:"arrivals"},null,8,["flights"])]))])):c("",!0),e.selected==1?(r(),i("div",Zt,[h(m,{airlines:n.airlines},null,8,["airlines"])])):c("",!0),e.selected==2?(r(),i("div",te,[h(S,{routes:n.routes},null,8,["routes"])])):c("",!0),e.selected==3?(r(),i("div",ee,[h(D,{cards:n.cards},null,8,["cards"])])):c("",!0),e.selected==4?(r(),i("div",se,le)):c("",!0)])])]),h(I)],64)}const ce=C(zt,[["render",re],["__scopeId","data-v-609042d3"]]);export{ce as default};

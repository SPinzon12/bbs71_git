import{_ as C,j as N,r as p,o as l,c as i,b as t,n as k,h as w,t as h,w as A,v as P,a as d,F as b,g as m,k as W,f as u,p as F,e as T,D as B,l as L}from"./index-c8712896.js";import{N as M,F as O}from"./Footer-f6cb50f1.js";import{S as R,F as V}from"./FlightRouteTable-bdb775bf.js";const q={components:{FlightCard:N},props:{tableName:{type:String,required:!0},flights:{type:Array,required:!0},flightType:{type:String,required:!0,validator:o=>["arrivals","departures"].includes(o)}},data(){return{filterField:"",selectedFlight:null,page:1,perPage:10,pages:[],totalFlights:0}},computed:{filteredFlights(){const o=this.flights.filter(s=>{const a=this.filterField.toLowerCase(),_=s.airline.name.toLowerCase(),e=s.route.from.origin.toLowerCase(),n=s.route.to.dest.toLowerCase(),c=s.flightInfo.flightNumber.toLowerCase();if(this.flightType==="arrivals")return s.departure.airport.originCityName.toLowerCase().startsWith(a)||_.startsWith(a)||c.startsWith(a)||e.startsWith(a);const r=s.arrival.airport.destCityName.toLowerCase();return n.startsWith(a)||_.startsWith(a)||r.startsWith(a)||c.startsWith(a)});return this.totalFlights=o.length,this.paginate(o)},setFlights(){console.log(this.totalFlights);let o=Math.ceil(this.totalFlights/this.perPage);this.pages=[];for(let s=1;s<=o;s++)this.pages.push(s);return this.pages}},methods:{handleRowClick(o){console.log("Se hizo clic en la fila:",o),this.selectedFlight=o},closeCard(){this.selectedFlight=null},paginate(o){let s=this.page,a=this.perPage,_=s*a-a,e=s*a;return o.slice(_,e)}}},g=o=>(F("data-v-0f305e2b"),o=o(),T(),o),z={class:"container"},U={class:"form-group"},j={class:"table-name"},E={class:"table"},G={class:"table-dark"},H=g(()=>t("th",{scope:"col"},"Date",-1)),J=g(()=>t("th",{scope:"col"},"Scheduled time",-1)),K={key:0,scope:"col"},Q=g(()=>t("th",{scope:"col"},"Airline",-1)),X={key:1,scope:"col"},Y=g(()=>t("th",{scope:"col"},"Flight",-1)),Z=g(()=>t("th",{scope:"col"},"Status",-1)),tt={class:"overflow-auto"},et=["onClick"],st={class:"table-light"},ot={class:"table-light"},rt={key:0,class:"table-light"},lt={class:"table-light"},it={key:1,class:"table-light"},at={class:"table-light"},nt={key:0},ct=g(()=>t("tr",null,[t("td",{colspan:"6"},[t("div",{class:"alert alert-warning text-center",role:"alert"}," No flights found. ")])],-1)),dt=[ct],ht={class:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},_t={class:"btn-group mr-2 mx-auto",role:"group","aria-label":"Button group with nested dropdown"},ut=g(()=>t("i",{class:"fa-solid fa-angles-left"},null,-1)),pt=[ut],gt=["onClick"],ft=g(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),bt=[ft],vt={key:0,class:"row"};function mt(o,s,a,_,e,n){const c=p("flight-card");return l(),i(b,null,[t("div",z,[t("div",U,[t("label",j,[t("i",{class:k(a.tableName==="Arrivals"?"fas fa-plane-arrival":"fas fa-plane-departure")},null,2),w(" "+h(a.tableName),1)]),A(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=r=>e.filterField=r),placeholder:"Write the flight, airline or city..."},null,512),[[P,e.filterField]])]),t("table",E,[t("thead",G,[t("tr",null,[H,J,a.flightType==="arrivals"?(l(),i("th",K,"Origin")):d("",!0),Q,a.flightType!=="arrivals"?(l(),i("th",X,"Destination")):d("",!0),Y,Z])]),t("tbody",tt,[(l(!0),i(b,null,m(n.filteredFlights,(r,f)=>(l(),i("tr",{key:r.id,onClick:y=>n.handleRowClick(r)},[t("td",st,h(r.flightInfo.flightDate),1),t("td",ot,h(a.flightType==="arrivals"?r.arrival.crsArrTime:r.departure.crsDepTime),1),a.flightType==="arrivals"?(l(),i("td",rt,h(a.flightType==="arrivals"?r.route.from.origin:r.route.to.dest),1)):d("",!0),t("td",lt,h(r.airline.name),1),a.flightType!=="arrivals"?(l(),i("td",it,h(a.flightType!=="arrivals"?r.route.to.dest:r.route.from.origin),1)):d("",!0),t("td",at,h(r.flightInfo.flightNumber),1),t("td",{class:"table-light",style:W({color:r.flightInfo.isCancelled||r.flightInfo.isDiverted?"red":"green"})},[t("b",null,h(r.flightInfo.isDiverted?"Diverted":r.flightInfo.isCancelled?"Cancelled":"Arrived"),1)],4)],8,et))),128))]),n.filteredFlights.length===0?(l(),i("tbody",nt,dt)):d("",!0)]),t("div",ht,[t("div",_t,[e.page!=1?(l(),i("button",{key:0,onClick:s[1]||(s[1]=r=>e.page--),type:"button",class:"btn btn-warning"},pt)):d("",!0),(l(!0),i(b,null,m(n.setFlights.slice(e.page-1,e.page+2),(r,f)=>(l(),i("button",{key:f,onClick:y=>e.page=r,type:"button",class:k({"btn btn-warning":e.page!=r,"btn btn-dark":e.page==r})},h(r),11,gt))),128)),e.page<e.pages.length?(l(),i("button",{key:1,onClick:s[2]||(s[2]=r=>e.page++),type:"button",class:"btn btn-warning"},bt)):d("",!0)])])]),e.selectedFlight?(l(),i("div",vt,[u(c,{flight:e.selectedFlight,onClose:n.closeCard},null,8,["flight","onClose"])])):d("",!0)],64)}const yt=C(q,[["render",mt],["__scopeId","data-v-0f305e2b"]]);const kt={props:{airlines:{type:Array,required:!0}},data(){return{page:1,perPage:8,pages:[]}},computed:{displayedAirlines(){return this.paginate(this.airlines)},setAirlines(){let o=Math.ceil(this.airlines.length/this.perPage);this.pages=[];for(let s=1;s<=o;s++)this.pages.push(s);return this.pages}},methods:{paginate(o){let s=this.page,a=this.perPage,_=s*a-a,e=s*a;return o.slice(_,e)}}},v=o=>(F("data-v-21d828d5"),o=o(),T(),o),Ct={class:"container"},wt=v(()=>t("div",{class:"form-group"},[t("label",{class:"table-name"},[t("h1",null,[t("i",{class:"fa-solid fa-ticket-airline"}),w(" Airlines")])])],-1)),Ft={class:"table"},Tt=v(()=>t("thead",{class:"table-dark"},[t("tr",null,[t("th",{scope:"col"},"Airline"),t("th",{scope:"col"},"Number of Flights")])],-1)),At={class:"overflow-auto"},xt={class:"table-light"},St={class:"table-light"},Dt={key:0},$t=v(()=>t("tr",null,[t("td",{colspan:"2"},[t("div",{class:"alert alert-warning text-center",role:"alert"}," No airlines found. ")])],-1)),It=[$t],Nt={class:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},Pt={class:"btn-group mr-2 mx-auto",role:"group","aria-label":"Button group with nested dropdown"},Wt=v(()=>t("i",{class:"fa-solid fa-angles-left"},null,-1)),Bt=[Wt],Lt=["onClick"],Mt=v(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),Ot=[Mt];function Rt(o,s,a,_,e,n){return l(),i("div",Ct,[wt,t("table",Ft,[Tt,t("tbody",At,[(l(!0),i(b,null,m(n.displayedAirlines,(c,r)=>(l(),i("tr",{key:c.iata},[t("td",xt,[t("b",null,"("+h(c.iata)+")",1),w(" "+h(c.name),1)]),t("td",St,h(c.count),1)]))),128))]),n.displayedAirlines.length===0?(l(),i("tbody",Dt,It)):d("",!0)]),t("div",Nt,[t("div",Pt,[e.page!=1?(l(),i("button",{key:0,onClick:s[0]||(s[0]=c=>e.page--),type:"button",class:"btn btn-warning"},Bt)):d("",!0),(l(!0),i(b,null,m(n.setAirlines.slice(e.page-1,e.page+2),(c,r)=>(l(),i("button",{onClick:f=>e.page=c,class:k({"btn btn-warning":e.page!=c,"btn btn-dark":e.page==c}),type:"button"},h(c),11,Lt))),256)),e.page<e.pages.length?(l(),i("button",{key:1,onClick:s[1]||(s[1]=c=>e.page++),type:"button",class:"btn btn-warning"},Ot)):d("",!0)])])])}const Vt=C(kt,[["render",Rt],["__scopeId","data-v-21d828d5"]]);const qt={components:{FlightTable:yt,Navbar:M,Footer:O,SlideBar:R,DashboardCard:B,AirlineTable:Vt,FlightRouteTable:V},data(){return{showArrivals:!1,selected:0,menuOptions:[{title:"Arrivals/Departures",iconClass:"fa-regular fa-paper-plane fa-xl"},{title:"Airlines",iconClass:"fa-solid fa-cart-flatbed-suitcase fa-xl"},{title:"Flight routes",iconClass:"fa-solid fa-plane-up fa-xl"},{title:"Dashboard",iconClass:"fa-solid fa-chart-line fa-xl"}]}},computed:{airport(){return this.$store.state.user.user.name},flights_departure(){return this.$store.state.airport.flights_departure},flights_arrival(){return this.$store.state.airport.flights_arrival},cards(){return this.$store.state.airport.cards},airlines(){return this.$store.state.airport.airlines},routes(){return this.$store.state.airport.routes}},methods:{onMenuOptionSelected(o){this.selected=o}},beforeMount(){this.$store.dispatch("airport/getFlightsDep",this.$store.state.user.user),this.$store.dispatch("airport/getFlightsArr",this.$store.state.user.user),this.$store.dispatch("airport/getCards",this.$store.state.user.user),this.$store.dispatch("airport/getAirlines",this.$store.state.user.user),this.$store.dispatch("airport/getRoutes",this.$store.state.user.user)}},x=o=>(F("data-v-609042d3"),o=o(),T(),o),zt={class:"container"},Ut={class:"airport_name"},jt={class:"row"},Et={class:"col-md-3"},Gt={class:"col-md-9"},Ht={key:0},Jt={class:"form-check form-switch"},Kt=x(()=>t("label",{class:"form-check-label",for:"showArrivals"},[t("b",null,"Arrivals/Departures")],-1)),Qt={key:0,class:"table"},Xt={key:1,class:"table"},Yt={key:1},Zt={key:2},te={key:3},ee={key:4},se=x(()=>t("h1",null,"Time on the runway",-1)),oe=[se];function re(o,s,a,_,e,n){const c=p("Navbar"),r=p("SlideBar"),f=p("FlightTable"),y=p("AirlineTable"),S=p("FlightRouteTable"),D=p("DashboardCard"),$=p("Footer");return l(),i(b,null,[u(c),t("div",zt,[t("h1",Ut,"Airport: "+h(n.airport),1),t("div",jt,[t("div",Et,[u(r,{"menu-options":e.menuOptions,selected:e.selected,onSelected:n.onMenuOptionSelected},null,8,["menu-options","selected","onSelected"])]),t("div",Gt,[e.selected==0?(l(),i("div",Ht,[t("div",Jt,[Kt,A(t("input",{class:"form-check-input",type:"checkbox",id:"showArrivals","onUpdate:modelValue":s[0]||(s[0]=I=>e.showArrivals=I)},null,512),[[L,e.showArrivals]])]),e.showArrivals?(l(),i("div",Qt,[u(f,{tableName:"Departures",flights:n.flights_departure,flightType:"departures"},null,8,["flights"])])):(l(),i("div",Xt,[u(f,{tableName:"Arrivals",flights:n.flights_arrival,flightType:"arrivals"},null,8,["flights"])]))])):d("",!0),e.selected==1?(l(),i("div",Yt,[u(y,{airlines:n.airlines},null,8,["airlines"])])):d("",!0),e.selected==2?(l(),i("div",Zt,[u(S,{routes:n.routes},null,8,["routes"])])):d("",!0),e.selected==3?(l(),i("div",te,[u(D,{cards:n.cards},null,8,["cards"])])):d("",!0),e.selected==4?(l(),i("div",ee,oe)):d("",!0)])])]),u($)],64)}const ne=C(qt,[["render",re],["__scopeId","data-v-609042d3"]]);export{ne as default};
